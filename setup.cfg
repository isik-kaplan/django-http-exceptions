########################
##### Tox settings #####
########################
[tox:tox]
distshare = {homedir}/.tox/distshare
envlist = 
    py{35,36,37,38}-django{20,21,22}  # Django 2.x
    py{36,37,38,39}-django{30,31,32}  # Django 3.x
    py{37,38,39,310}-django{40,41,42}  # Django 4.x
    py{310,311,312}-django{50,51}      # Django 5.x
skip_missing_interpreters = true
indexserver =
    pypi = https://pypi.python.org/simple

[testenv]
passenv = TRAVIS TRAVIS_*
setenv = PYTHONPATH = {toxinidir}
commands =
    pip install -e .
    coverage run --source django_http_exceptions test/manage.py test
    coverage report -m
deps =
    pytest-pep8
    pytest-cov
    django20: Django>=2.0,<2.1
    django21: Django>=2.1,<2.2
    django22: Django>=2.2,<2.3
    django30: Django>=3.0,<3.1
    django31: Django>=3.1,<3.2
    django32: Django>=3.2,<3.3
    django40: Django>=4.0,<4.1
    django41: Django>=4.1,<4.2
    django42: Django>=4.2,<4.3
    django50: Django>=5.0,<5.1
    django51: Django>=5.1,<5.2

###########################
##### Flake8 settings #####
###########################
[tool:pytest]
addopts = -vvl
pep8maxlinelength = 120

#############################
##### Coverage settings #####
#############################
[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    def __str__

[coverage:run]
branch = True
omit =
    */htmlcov/*
    *.tox/*

[coverage:html]
title = django_http_exception Coverage
